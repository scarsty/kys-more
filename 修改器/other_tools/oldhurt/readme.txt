A simple formula editor for "All Heros in Kam Yung Storys".
 

This file was written in Simplified Chinese. 


[功能]

调整游戏《金庸群侠传》的几个参数。
复制zz.exe和zz.ini到游戏目录下运行；或者在任意位置运行，浏览到游戏主程序文件。
通常游戏主程序文件名为z.dat，如果不是，请自行指定。
可以根据文件大小辨别是否为swimmingfish更新过的主程序文件，无需另外设置。


[更新记录]

2008-01-13
Alpha 2
更新：
1.文件打开对话框更正一个bug，增加过滤器。
2.修正文字错误，添加说明文档。

2008-01-11
Alpha 1


[说明]

注:下文所指的"因子"一词是为说明方便,并非所有的"因子"均是相乘关系。

基本伤害计算：
攻击防御之差=

[攻方武学常识之和*攻方武学常识因子+
 (攻方人物基本攻击*基本攻击因子+所使用武学攻击)*武学攻击因子
 +武器装备加成+武功武器配合加成]

-(守方有效武学常识之和*守方武学常识因子+守方人物基本防御+武器装备加成)*防守因子

实际伤害=攻击防御之差*2/伤害因子+随机攻击-随机防御

如果实际伤害小于零,则按照备用伤害计算:
伤害=攻方总攻击力/备用攻击因子+备用随机攻击-备用随机防御

原版中：
攻击防御之差=
[攻方武学常识之和*2+(攻方人物基本攻击*3+所使用武学攻击)*2+武器装备加成+武功武器配合加成]
-(守方有效武学常识之和*2+守方人物基本防御+武器装备加成)*3

实际伤害=攻击防御之差*2/3+随机攻击(<20)-随机防御(<20)


其他：
中毒程度=(攻方用毒-守方抗毒)*2^中毒程度指数
中毒损血=中毒程度/中毒损血因子
医疗所需最小体力默认值为50
医疗增加生命=原计算值*(增强医疗因子+1)
暗器技巧攻击力=暗器技巧/暗器技巧因子,默认为3


一些说明：

武学常识因子：
双方的武学常识因子目前限定为2，1，0仅3个有效值，这是由于汇编代码本身的限制。
原版在这里的代码仅有两个字节，那么改成1就是将这两个字节改成空指令，改成0就是清空存储器。
注：1/2可能也能实现。

武学攻击因子：
目前限定为2，1，1/2共3个有效值，也是受指令长度限制。
注：0可能也能实现。

其他的因子基本可以改成128以下的任何值。

随机最大值：
例如随机攻击最大值原版为20，那么随机值在0~19之间。如果把随机攻击最大值和随机防御最大值都改成0，那么实际伤害将仅仅有1~2的浮动。

备用伤害公式：
如果基本伤害公式计算结果为负，那么备用伤害公式启动。注意这个公式是无视防御的。

中毒程度：
这里是以2的指数形式表示。

医疗所需最小体力：
默认为50，不建议更改，可能会有奇怪现象（未严格测试）。

医疗增强：
医疗公式比较复杂，之前的医疗公式不全，在人物受伤程度不同时医疗效果会打折。更改太麻烦，而且恐怕也无必要。
原版中在计算完医疗会加上一个小于5的随机数，那么我把这部分改成一个乘法指令。缺点就是每次医疗增加生命的值是固定的，而原版有5点左右的浮动（不过大家可能不会太在乎）。

由于原程序的寻址方法（可能与Linear Executable格式有关）不清楚，目前伤害公式还不能任意更改，只能调整几个参数。如有高手了解这方面信息，欢迎指教，不胜感激！


[参考文献]

z3.idb注释，曾大虾。
伤害与中毒公式，小小猪等。

